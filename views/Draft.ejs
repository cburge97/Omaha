<!DOCTYPE html>
<html>
<head>
	<!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Player Stats</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>

	<style>
		body{
            font-family: Verdana;
            color: black;
		}	
		.my-custom-scrollbar {
			position: relative;
			height: 200px;
			overflow: auto;
		}
		.my-custom-scrollbar2 {
			position: relative;
			height: 250px;
			overflow: auto;
		}
	.table-wrapper-scroll-y {
		display: block;
	}
	.row {
  		display: flex;
		}

	.column {
  		flex: 50%;
	}
		
	</style>
</head>
<body>
	<nav class="navbar navbar-expand-lg navbar-light bg-light">
		<a class="navbar-brand" href=#>OMAHA</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
		  <span class="navbar-toggler-icon"></span>
		</button>
	  
<div class="collapse navbar-collapse" id="navbarSupportedContent">
  <ul class="navbar-nav mr-auto">
	<li class="nav-item">
	  <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
	</li>
	<li class="nav-item">
	  <a class="nav-link" href="playerstats">Player Stats</a>
	</li>
	<li class="nav-item dropdown">
	  <a class="nav-link dropdown-toggle" href="transaction" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		Transactions
	  </a>
	  <div class="dropdown-menu" aria-labelledby="navbarDropdown">
		<a class="dropdown-item" href="add_drop">Add/Drop</a>
		<div class="dropdown-divider"></div>
		<a class="dropdown-item" href="trade">Trade</a>
		
	  </div>
	</li>
	<li class="nav-item">
	  <a class="nav-link active" href="Draft">Draft</a>
	</li>
  </ul>
 
</div>
</nav>

<h1>Draft</h1>
<div id="setupInfo">
	<label> Number of People:</label>
	<input type="number" id="numPeople" min="1" max="20" value="1">
	<label> Draft Pick:</label>
	<input type="number" id="pick" min="1" max="20" value="1">
	<br>
	<input type="submit" id="setupBtn" value="Submit">
</div>

<div id="drafting" style="visibility: hidden">	
	<div class="row" style="padding-left: 1cm">
		  <div class="column"><h3>User Team: </h3>
			<ul class=" table-wrapper-scroll-y my-custom-scrollbar" id="userList">
						
			</ul>
			
	</div>
  	<div class="column" style="padding-left:0.5cm"><h3>Already Picked: </h3>
		<ol class=" table-wrapper-scroll-y my-custom-scrollbar" id="testList">
						
		</ol>
	</div>
	</div>
	<div style="padding: 0.5cm" >
			<div class="row" style="padding-left: 1cm">
					<div class="column">
		<input class="form-control" id="myInput" type="text" placeholder="Search.." style="padding-left:0.5cm">
		<div class="table-wrapper-scroll-y my-custom-scrollbar2" >

		  <table class="table table-bordered table-striped mb-0" id = "draft_table">
    	<thead>
      		<tr>
				  <th scope="col">#</th>
        		<th scope="col">First</th>
        		<th scope="col">Last</th>
        		<th scope="col">Position</th>
				<th scope="col">College</th>
				<th scope="col"> Team</th>
				
			  </tr>
    	</thead>
    	<tbody id="myTable" >
				<% player.forEach((player, index) => { %>
					<tr id=<%= index %>>
					  <td ><%= index %></td>
					  <td><%= player.first_name %></td>
					  <td><%= player.last_name %></td>
					  <td><%= player.position %></td>
					  <td><%= player.college %></td>
					  <td><%= player.Team %></td>
				   </tr>
			   <% }) %>
    </tbody>
  	</table>
</div>
</div>
<div class="column" style="padding-left:0.5cm"><h3>Stats: </h3>
	<table class="table table-bordered table-striped ">
			<thead>
				  <tr>
					<th scope="col">Year</th>
					<th scope="col">Name</th>
					<th scope="col">Rush Yards</th>
					<th scope="col">Receive Yards</th>
					<th scope="col">Throw Yards</th>
					<th scope="col">R TD</th>
					<th scope="col">T TD</th>
					<th scope="col">Re TD</th>
					<th scope="col">PAT</th>
					<th scope="col">FG </th>
				  </tr>
			</thead>
			<tbody id="statTable">
					<tr>
						<td>2016</td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td>2017</td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td>Career</td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
		</tbody>
		  </table>
</div>

</div>
</div>

<input type="submit" id="analyze" value="Submit">
<div id="feedback" style= "padding-left: 0.5cm; display: none">
	<h4>Feedback:</h4>
	<p> Good Job! </p>

	
</div>
</div>	


  <!-- The Modal -->
  <div class="modal" id="myModal">
    <div class="modal-dialog">
      <div class="modal-content">
      
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Modal Heading</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        
        <!-- Modal body -->
        <div class="modal-body">
          Player career and season stats here
        </div>
        
        <!-- Modal footer -->
        <div class="modal-footer">
			<button type="button" data-dismiss="modal">Draft </button>
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
        
      </div>
    </div>
  </div>

<script>
$(document).ready(function(){
  $("#myInput").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#myTable tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});
</script>

<script>
	var setupStuff = document.getElementById("setupInfo");
	var draftingVis = document.getElementById("drafting");
	var yourPick;
	var picksRound;
	document.getElementById("setupBtn").onclick = function()
	{
		yourPick = document.getElementById("pick").value;
		picksRound = document.getElementById("numPeople").value;
		setupStuff.style.display = "none";
		draftingVis.style.visibility = "visible";
	}

	var count = 1;
	var currentPick = 1;
	var round = 1;
	var table = document.getElementById("draft_table");
	var targetT = document.getElementById("userTable");    
	var targetT2 = document.getElementById("statTable");    
	var stats = <%- JSON.stringify(stats) %>;
			var stats17 = <%- JSON.stringify(stats17) %>;
			var statsCareer = <%- JSON.stringify(statsCareer) %>;

	for(var i = 1; i < table.rows.length; i++){

		table.rows[i].ondblclick = function()
		{
			var li = document.createElement("LI");  
			var li2 = document.createElement("LI");
			

			rIndex = this.rowIndex;
			li.innerHTML = this.cells[1].innerHTML + " " + this.cells[2].innerHTML;
		
			
			document.getElementById("testList").appendChild(li);

			if(round % 2 < 1){
				if(currentPick == (round*picksRound-yourPick + 1)){
					li2.innerHTML = this.cells[1].innerHTML + " " + this.cells[2].innerHTML;
					document.getElementById("userList").appendChild(li2);
				}
			}
			else{
				console.log("odd " + (currentPick == ((round-1)*picksRound + yourPick)));
				console.log("Current Pick " + (currentPick));
				console.log("Other " + ((round-1)*picksRound + parseInt(yourPick)));
				console.log("piclround " + (picksRound ));
				console.log("u pick  " + (yourPick));
				
				if(currentPick == ((round-1)*picksRound + parseInt(yourPick))){
					li2.innerHTML = this.cells[1].innerHTML + " " + this.cells[2].innerHTML;
					document.getElementById("userList").appendChild(li2);
				}
			}
			console.log("Count " +count);
			console.log("Round " + round);
			console.log(picksRound);
			
			currentPick = currentPick + 1;
			count = count + 1;
			
			if(count > picksRound){
				round = round + 1;
				count = 1;
			}	
			this.remove();
			
			
		}

		table.rows[i].onclick = function()
			{
				var rIndex = this.rowIndex -1 ;
				
				//2016
				targetT2.rows[0].cells[1].innerHTML = JSON.stringify(stats[table.rows[rIndex+1].cells[0].innerHTML].first_name + " " + stats[table.rows[rIndex+1].cells[0].innerHTML].last_name);
				targetT2.rows[0].cells[2].innerHTML = JSON.stringify(stats[table.rows[rIndex+1].cells[0].innerHTML].RushingYds);
				targetT2.rows[0].cells[3].innerHTML = JSON.stringify(stats[table.rows[rIndex+1].cells[0].innerHTML].ReceivingYDS);
				targetT2.rows[0].cells[4].innerHTML = JSON.stringify(stats[table.rows[rIndex+1].cells[0].innerHTML].PassingYds);
				targetT2.rows[0].cells[5].innerHTML = JSON.stringify(stats[table.rows[rIndex+1].cells[0].innerHTML].RushingTD);
				targetT2.rows[0].cells[6].innerHTML = JSON.stringify(stats[table.rows[rIndex+1].cells[0].innerHTML].PassingTD);
				targetT2.rows[0].cells[7].innerHTML = JSON.stringify(stats[table.rows[rIndex+1].cells[0].innerHTML].ReceivingTD);
				targetT2.rows[0].cells[8].innerHTML = JSON.stringify(stats[table.rows[rIndex+1].cells[0].innerHTML].PAT);
				targetT2.rows[0].cells[9].innerHTML = JSON.stringify(stats[table.rows[rIndex+1].cells[0].innerHTML].FG);

				//2017
				targetT2.rows[1].cells[1].innerHTML = JSON.stringify(stats17[table.rows[rIndex+1].cells[0].innerHTML].first_name + " " + stats17[table.rows[rIndex+1].cells[0].innerHTML].last_name);
				targetT2.rows[1].cells[2].innerHTML = JSON.stringify(stats17[table.rows[rIndex+1].cells[0].innerHTML].RushingYds);
				targetT2.rows[1].cells[3].innerHTML = JSON.stringify(stats17[table.rows[rIndex+1].cells[0].innerHTML].ReceivingYDS);
				targetT2.rows[1].cells[4].innerHTML = JSON.stringify(stats17[table.rows[rIndex+1].cells[0].innerHTML].PassingYds);
				targetT2.rows[1].cells[5].innerHTML = JSON.stringify(stats17[table.rows[rIndex+1].cells[0].innerHTML].RushingTD);
				targetT2.rows[1].cells[6].innerHTML = JSON.stringify(stats17[table.rows[rIndex+1].cells[0].innerHTML].PassingTD);
				targetT2.rows[1].cells[7].innerHTML = JSON.stringify(stats17[table.rows[rIndex+1].cells[0].innerHTML].ReceivingTD);
				targetT2.rows[1].cells[8].innerHTML = JSON.stringify(stats17[table.rows[rIndex+1].cells[0].innerHTML].PAT);
				targetT2.rows[1].cells[9].innerHTML = JSON.stringify(stats17[table.rows[rIndex+1].cells[0].innerHTML].FG);

				//career
				targetT2.rows[2].cells[1].innerHTML = JSON.stringify(statsCareer[table.rows[rIndex+1].cells[0].innerHTML].first_name + " " + statsCareer[table.rows[rIndex+1].cells[0].innerHTML].last_name);
				targetT2.rows[2].cells[2].innerHTML = JSON.stringify(statsCareer[table.rows[rIndex+1].cells[0].innerHTML].RushingYds);
				targetT2.rows[2].cells[3].innerHTML = JSON.stringify(statsCareer[table.rows[rIndex+1].cells[0].innerHTML].ReceivingYDS);
				targetT2.rows[2].cells[4].innerHTML = JSON.stringify(statsCareer[table.rows[rIndex+1].cells[0].innerHTML].PassingYds);
				targetT2.rows[2].cells[5].innerHTML = JSON.stringify(statsCareer[table.rows[rIndex+1].cells[0].innerHTML].RushingTD);
				targetT2.rows[2].cells[6].innerHTML = JSON.stringify(statsCareer[table.rows[rIndex+1].cells[0].innerHTML].PassingTD);
				targetT2.rows[2].cells[7].innerHTML = JSON.stringify(statsCareer[table.rows[rIndex+1].cells[0].innerHTML].ReceivingTD);
				targetT2.rows[2].cells[8].innerHTML = JSON.stringify(statsCareer[table.rows[rIndex+1].cells[0].innerHTML].PAT);
				targetT2.rows[2].cells[9].innerHTML = JSON.stringify(statsCareer[table.rows[rIndex+1].cells[0].innerHTML].FG);
			
			}
	}
</script>

<script>
document.getElementById("analyze").onclick = function()
	{
		
		document.getElementById("feedback").style.display = "block";
	}
</script>

</body>
	
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</html>
